{"version":3,"file":"mathjax.cjs.development.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * This file is part of Serlo.org.\n *\n * Copyright (c) 2013-2021 Serlo Education e.V.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\")\n * you may not use this file except in compliance with the License\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @copyright Copyright (c) 2013-2021 Serlo Education e.V.\n * @license   http://www.apache.org/licenses/LICENSE-2.0 Apache License 2.0\n * @link      https://github.com/serlo-org/serlo.org for the canonical source repository\n */\nlet mathJaxInitialized = false\n\nexport function reprocess(context?: unknown) {\n  command('Reprocess', context)\n}\n\nexport function typeset(context?: unknown) {\n  command('Typeset', context)\n}\n\nexport function queue(args: unknown) {\n  const { MathJax } = window as { MathJax?: any }\n  if (MathJax) {\n    MathJax.Hub.Queue(args)\n  }\n}\n\nfunction command(command: string, context?: unknown) {\n  const { MathJax } = window as { MathJax?: any }\n  if (MathJax) {\n    MathJax.Hub.Queue([command, MathJax.Hub, ...(context ? [context] : [])])\n  }\n}\n\nexport function initMathJax() {\n  if (typeof window === undefined || mathJaxInitialized) return\n  mathJaxInitialized = true\n  const { $ } = (window as unknown) as { $: JQueryStatic }\n\n  if ($('mathjax-config').length > 0) return\n  const lang = $('html').attr('lang') || 'en'\n  $('head').append(\n    `\n      <script type=\"text/x-mathjax-config\" id=\"mathjax-config\">\n        MathJax.Hub.Config({\n            displayAlign: 'left',\n            extensions: ['tex2jax.js', 'fast-preview.js'],\n            jax: ['input/TeX', 'output/SVG', 'output/CommonHTML'],\n            skipStartupTypeset: true,\n            tex2jax: {\n                inlineMath: [\n                    ['%%', '%%']\n                ],\n                displayMath: [\n                    ['$$', '$$']\n                ],\n            },\n            'HTML-CSS': {\n                scale: 100,\n                linebreaks: {\n                    automatic: true\n                },\n                preferredFont: 'STIX'\n            },\n            SVG: {\n                linebreaks: {\n                    automatic: true\n                },\n                font: 'STIX-Web'\n            },\n            showProcessingMessages: false,\n            TeX: {\n                extensions: ['mediawiki-texvc.js', 'mhchem.js']\n            }\n        });\n      </script>\n    `\n  )\n  $.ajax({\n    url: `https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML&locale=${lang}`,\n    dataType: 'script',\n    success() {\n      // Initial typeset\n      typeset()\n    },\n    async: true,\n  })\n}\n"],"names":["mathJaxInitialized","reprocess","context","command","typeset","queue","args","window","MathJax","Hub","Queue","initMathJax","undefined","$","length","lang","attr","append","ajax","url","dataType","success","async"],"mappings":";;;;AAAA;;;;;;;;;;;;;;;;;;;;;AAqBA,IAAIA,kBAAkB,GAAG,KAAzB;SAEgBC,UAAUC;AACxBC,EAAAA,OAAO,CAAC,WAAD,EAAcD,OAAd,CAAP;AACD;SAEeE,QAAQF;AACtBC,EAAAA,OAAO,CAAC,SAAD,EAAYD,OAAZ,CAAP;AACD;SAEeG,MAAMC;AACpB,gBAAoBC,MAApB;AAAA,MAAQC,OAAR,WAAQA,OAAR;;AACA,MAAIA,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ,CAAkBJ,IAAlB;AACD;AACF;;AAED,SAASH,OAAT,CAAiBA,OAAjB,EAAkCD,OAAlC;AACE,iBAAoBK,MAApB;AAAA,MAAQC,OAAR,YAAQA,OAAR;;AACA,MAAIA,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ,EAAmBP,OAAnB,EAA4BK,OAAO,CAACC,GAApC,SAA6CP,OAAO,GAAG,CAACA,OAAD,CAAH,GAAe,EAAnE;AACD;AACF;;SAEeS;AACd,MAAI,OAAOJ,MAAP,KAAkBK,SAAlB,IAA+BZ,kBAAnC,EAAuD;AACvDA,EAAAA,kBAAkB,GAAG,IAArB;AACA,iBAAeO,MAAf;AAAA,MAAQM,CAAR,YAAQA,CAAR;AAEA,MAAIA,CAAC,CAAC,gBAAD,CAAD,CAAoBC,MAApB,GAA6B,CAAjC,EAAoC;AACpC,MAAMC,IAAI,GAAGF,CAAC,CAAC,MAAD,CAAD,CAAUG,IAAV,CAAe,MAAf,KAA0B,IAAvC;AACAH,EAAAA,CAAC,CAAC,MAAD,CAAD,CAAUI,MAAV;AAqCAJ,EAAAA,CAAC,CAACK,IAAF,CAAO;AACLC,IAAAA,GAAG,2GAAyGJ,IADvG;AAELK,IAAAA,QAAQ,EAAE,QAFL;AAGLC,IAAAA,OAHK;AAIH;AACAjB,MAAAA,OAAO;AACR,KANI;AAOLkB,IAAAA,KAAK,EAAE;AAPF,GAAP;AASD;;;;;;;"}