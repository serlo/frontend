{"version":3,"file":"mathjax.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * This file is part of Serlo.org.\n *\n * Copyright (c) 2013-2021 Serlo Education e.V.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\")\n * you may not use this file except in compliance with the License\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @copyright Copyright (c) 2013-2021 Serlo Education e.V.\n * @license   http://www.apache.org/licenses/LICENSE-2.0 Apache License 2.0\n * @link      https://github.com/serlo-org/serlo.org for the canonical source repository\n */\nlet mathJaxInitialized = false\n\nexport function reprocess(context?: unknown) {\n  command('Reprocess', context)\n}\n\nexport function typeset(context?: unknown) {\n  command('Typeset', context)\n}\n\nexport function queue(args: unknown) {\n  const { MathJax } = window as { MathJax?: any }\n  if (MathJax) {\n    MathJax.Hub.Queue(args)\n  }\n}\n\nfunction command(command: string, context?: unknown) {\n  const { MathJax } = window as { MathJax?: any }\n  if (MathJax) {\n    MathJax.Hub.Queue([command, MathJax.Hub, ...(context ? [context] : [])])\n  }\n}\n\nexport function initMathJax() {\n  if (typeof window === undefined || mathJaxInitialized) return\n  mathJaxInitialized = true\n  const { $ } = (window as unknown) as { $: JQueryStatic }\n\n  if ($('mathjax-config').length > 0) return\n  const lang = $('html').attr('lang') || 'en'\n  $('head').append(\n    `\n      <script type=\"text/x-mathjax-config\" id=\"mathjax-config\">\n        MathJax.Hub.Config({\n            displayAlign: 'left',\n            extensions: ['tex2jax.js', 'fast-preview.js'],\n            jax: ['input/TeX', 'output/SVG', 'output/CommonHTML'],\n            skipStartupTypeset: true,\n            tex2jax: {\n                inlineMath: [\n                    ['%%', '%%']\n                ],\n                displayMath: [\n                    ['$$', '$$']\n                ],\n            },\n            'HTML-CSS': {\n                scale: 100,\n                linebreaks: {\n                    automatic: true\n                },\n                preferredFont: 'STIX'\n            },\n            SVG: {\n                linebreaks: {\n                    automatic: true\n                },\n                font: 'STIX-Web'\n            },\n            showProcessingMessages: false,\n            TeX: {\n                extensions: ['mediawiki-texvc.js', 'mhchem.js']\n            }\n        });\n      </script>\n    `\n  )\n  $.ajax({\n    url: `https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML&locale=${lang}`,\n    dataType: 'script',\n    success() {\n      // Initial typeset\n      typeset()\n    },\n    async: true,\n  })\n}\n"],"names":["mathJaxInitialized","typeset","context","command","MathJax","window","Hub","Queue","undefined","$","length","lang","attr","append","ajax","url","dataType","success","async","args"],"mappings":"oEAqBA,IAAIA,GAAqB,WAMTC,EAAQC,GACtBC,EAAQ,UAAWD,GAUrB,SAASC,EAAQA,EAAiBD,OACxBE,EAAYC,OAAZD,QACJA,GACFA,EAAQE,IAAIC,OAAOJ,EAASC,EAAQE,YAASJ,EAAU,CAACA,GAAW,4CAK/CM,WAAXH,SAAwBL,GACnCA,GAAqB,MACbS,EAAOJ,OAAPI,OAEJA,EAAE,kBAAkBC,OAAS,QAC3BC,EAAOF,EAAE,QAAQG,KAAK,SAAW,KACvCH,EAAE,QAAQI,qiCAqCVJ,EAAEK,KAAK,CACLC,2GAA4GJ,EAC5GK,SAAU,SACVC,mBAEEhB,KAEFiB,OAAO,8BAjEWC,OACZf,EAAYC,OAAZD,QACJA,GACFA,EAAQE,IAAIC,MAAMY,+BAXIjB,GACxBC,EAAQ,YAAaD"}